<!DOCTYPE HTML>
<html>
<head>
    <title>Live Screen</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

    <!-- Tawk.to Script -->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/689782258b3b22192a593919/1j27t8oof';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
</head>
<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <a href="index.html" class="logo">Live Screen</a>
        </header>

        <!-- Nav -->
        <nav id="nav">
            <ul class="links">
                <li><a href="index.html">Projects</a></li>
                <li><a href="generic.html">Internships</a></li>
                <li><a href="elements.html">Certifications</a></li>
                <li class="active"><a href="live.html">Live Screen</a></li>
            </ul>
            <ul class="icons">
                <li><a href="https://www.linkedin.com/in/mohammed-idrees-ali-b19bb0190/" class="icon brands fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li>
                <li><a href="https://github.com/Idrees-8244" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
            </ul>
        </nav>

        <!-- Main -->
        <div id="main">

            <section id="screen-sharing">
                <header class="major">
                    <h2>Live Screen Sharing</h2>
                    <p>Visitors can request to view my screen. I will approve before sharing.</p>
                </header>

                <!-- Visitor side -->
                <button id="requestScreenBtn" class="button large">Request Screen Access</button>
                <p id="requestStatus" style="margin-top:10px;"></p>

                <!-- Host side -->
                <button id="shareScreenBtn" class="button large" style="display:none; margin-top:10px;">Share My Screen</button>

                <!-- Video for screen sharing -->
                <video id="screenVideo" autoplay style="width:100%; max-width:700px; border:1px solid #ccc; margin-top:20px;"></video>
            </section>

        </div>

        <!-- Copyright -->
        <div id="copyright">
            <ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
        </div>

    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
    let isApproved = false;

    document.getElementById('requestScreenBtn').addEventListener('click', () => {
        document.getElementById('requestStatus').innerText = "Request sent! Waiting for approval...";
        alert("Visitor requested screen access. Click 'Share My Screen' to approve.");
        document.getElementById('shareScreenBtn').style.display = 'inline-block';
    });

    document.getElementById('shareScreenBtn').addEventListener('click', async () => {
        try {
            const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });
            const video = document.getElementById('screenVideo');
            video.srcObject = stream;
            isApproved = true;
            alert("Screen sharing started! Visitor can now see your screen.");
        } catch (err) {
            alert('Screen sharing failed: ' + err.message);
        }
    });
    </script>

</body>
</html>
